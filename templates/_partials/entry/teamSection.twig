{#
TeamSection Component

Uses entry fields:
- title: string (required)
- subtitle: string (optional)
- description: string (optional)
- backgroundColor: Color field, default: 'soft'
- svgVariant: number 1-9 or 'none', default: 1
- members: array (required) - Array of team member objects
#}

{% import '_partials/theme-macros.twig' as theme %}
{% import '_partials/ui-macros.twig' as ui %}

{% set background = entry.backgroundColor.value ?? entry.backgroundColor ?? 'soft' %}
{% set svgVariant = entry.svgVariant.value ?? entry.svgVariant ?? 1 %}
{% set vars = theme.getThemeVars(background)|json_decode %}

<section class="py-16 relative {{ vars.backgroundClass }}">
    {# SVG Background Shapes #}
    {{ ui.svgShapes(svgVariant, vars) }}

    <div class="max-w-7xl mx-auto px-4 lg:px-8 relative z-10">
        <div class="text-center mb-12">
            {{ ui.subtitle(entry.subtitle, vars.subtitleBgClass) }}

            <h2 class="text-4xl font-bold {{ vars.titleColorClass }} mb-6">
                {{ entry.heading }}
            </h2>
        </div>
        <div class="mb-12">
            {% if entry.text %}
                <div class="text-xl {{ vars.textColorClass }}  max-w-3xl mx-auto content-styles">
                    {{ entry.text }}
                </div>
            {% endif %}
        </div>

        {# Image transform settings #}
        {% set imageWidth = 800 %}
        {% set imageHeightPx = 800 %}

        {% set transform = {
            format: 'webp',
            quality: 85,
            width: imageWidth,
            height: imageHeightPx,
            mode: 'crop'
        } %}

        <div class="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto">
            {% for member in entry.teamMembers %}
                {% set photo = member.image.one() ?? null %}
                <div class="bg-white rounded-2xl shadow-elevated overflow-hidden hover:shadow-2xl transition-all duration-300 hover:scale-105">
                    <div class="aspect-square overflow-hidden">
                        {% if photo %}
                            {{ tag('img', {
                                class: 'w-full h-full object-cover',
                                width: imageWidth,
                                height: imageHeightPx,
                                src: photo.getUrl(transform),
                                alt: photo.title
                            }) }}
                        {% endif %}
                    </div>
                    <div class="p-8">
                        <h3 class="text-2xl font-bold text-brand-primary mb-4">
                            {{ member.title }}
                        </h3>
                        <div class="space-y-3 mb-4">
                            <div class="flex items-center text-gray-700">
                                <svg class="w-5 h-5 mr-3 text-brand-secondary flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                </svg>
                                <a href="mailto:{{ member.email }}" class="hover:text-brand-primary transition-colors">
                                    {{ member.email }}
                                </a>
                            </div>
                            {% if member.phone is defined and member.phone %}
                                <div class="flex items-center text-gray-700">
                                    <svg class="w-5 h-5 mr-3 text-brand-secondary flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                    </svg>
                                    <a href="{{ member.phone.value|replace({' ': ''}) }}" class="hover:text-brand-primary transition-colors">
                                        {{ member.phone.label }}
                                    </a>
                                </div>
                            {% endif %}
                        </div>
                        {% if member.text is defined and member.text %}
                            <div class="text-gray-600 leading-relaxed content-styles">
                                {{ member.text }}
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>