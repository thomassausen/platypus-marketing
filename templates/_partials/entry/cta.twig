{#
CTA Section Component for Craft CMS 5

Uses entry fields:
- title: string (required)
- description: string (optional)
- text: Redactor field (optional)
- buttons: Matrix field with button entries (button field with label/value, buttonStyle: 'primary'|'secondary')
- backgroundColor: Color field, default: 'gradient'
- svgVariant: number 1-9 or 'none', default: 1
#}

{% set background = entry.backgroundColor.value ?? entry.backgroundColor ?? 'gradient' %}
{% set svgVariant = entry.svgVariant.value ?? entry.svgVariant ?? 1 %}

{# Default-Werte #}
{% set backgroundClass = '' %}
{% set textColorClass = 'text-gray-600' %}
{% set titleColorClass = 'text-brand-primary' %}
{% set buttonClass = 'bg-brand-primary hover:bg-brand-secondary' %}
{% set buttonTextClass = 'text-white' %}
{% set buttonBorderClass = 'border-brand-primary' %}
{% set buttonSecondaryClass = 'bg-white text-brand-primary' %}
{% set buttonSecondaryHoverClass = 'hover:bg-brand-secondary hover:text-white hover:border-brand-secondary' %}
{% set svgColor1 = 'text-brand-secondary/8' %}
{% set svgColor2 = 'text-brand-accent/10' %}
{% set svgColor3 = 'text-brand-primary/12' %}
{% set svgColor4 = 'text-brand-accent/15' %}

{# Background-spezifische Überschreibungen #}
{% if background == 'gradient' %}
    {% set backgroundClass = 'bg-gradient-to-br from-brand-primary to-brand-secondary' %}
    {% set textColorClass = 'text-white' %}
    {% set titleColorClass = 'text-white' %}
    {% set buttonClass = 'bg-white hover:bg-gray-100' %}
    {% set buttonTextClass = 'text-brand-primary' %}
    {% set buttonSecondaryClass = 'bg-white/10 text-white backdrop-blur-sm' %}
    {% set buttonBorderClass = 'border-white/30' %}
    {% set buttonSecondaryHoverClass = 'hover:bg-white hover:text-brand-primary hover:border-white' %}
    {% set svgColor1 = 'text-white/8' %}
    {% set svgColor2 = 'text-white/10' %}
    {% set svgColor3 = 'text-white/12' %}
    {% set svgColor4 = 'text-white/15' %}
{% elseif background == 'soft' %}
    {% set backgroundClass = 'bg-background-soft' %}
{% elseif background == 'white' %}
    {% set backgroundClass = 'bg-white' %}
{% elseif background == 'accent' %}
    {% set backgroundClass = 'bg-brand-accent' %}
{% elseif background in ['blue', 'orange'] %}
    {% set backgroundClass = background == 'blue' ? 'bg-brand-primary' : 'bg-brand-secondary' %}
    {% set textColorClass = 'text-white' %}
    {% set titleColorClass = 'text-white' %}
    {% set buttonClass = 'bg-white hover:bg-gray-100' %}
    {% set buttonTextClass = 'text-brand-primary' %}
    {% set buttonSecondaryClass = 'bg-white/10 text-white backdrop-blur-sm' %}
    {% set buttonBorderClass = 'border-white/30' %}
    {% set buttonSecondaryHoverClass = 'hover:bg-white hover:text-brand-primary hover:border-white' %}
    {% set svgColor1 = 'text-white/8' %}
    {% set svgColor2 = 'text-white/10' %}
    {% set svgColor3 = 'text-white/12' %}
    {% set svgColor4 = 'text-white/15' %}
{% endif %}

<section class="py-16 relative overflow-hidden {{ backgroundClass }}">
    {# SVG Background Shapes #}
    {% include '_partials/svg-shapes.twig' with {
        variant: svgVariant,
        color1: svgColor1,
        color2: svgColor2,
        color3: svgColor3,
        color4: svgColor4
    } %}
    <div class="max-w-7xl mx-auto px-4 lg:px-8 relative z-10">
        <div class="rounded-tl-[2.5rem] rounded-br-[2.5rem] p-12 text-center shadow-2xl bg-white">
            <h2 class="text-4xl font-bold text-brand-primary mb-6">
                {{ entry.title }}
            </h2>
            {% if entry.description %}
                <div class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
                    {{ entry.description }}
                </div>
            {% endif %}
            {% if entry.text %}
                <div class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto content-styles">
                    {{ entry.text }}
                </div>
            {% endif %}
            {% if entry.buttons %}
            <div class="flex justify-center flex-col sm:flex-row gap-4">
                {% for item in entry.buttons %}
                    {% if item.buttonStyle == 'primary' %}
                        <a href="{{ item.button.value }}" class="group relative bg-brand-primary text-white px-8 py-4 text-lg rounded-full hover:bg-brand-secondary hover:scale-105 transition-all duration-300 text-center font-semibold overflow-hidden">
                            <span class="relative z-10">{{ item.button.label }}</span>
                            <span class="relative z-10 inline-block ml-2 group-hover:translate-x-1 transition-transform">→</span>
                        </a>
                    {% elseif item.buttonStyle == 'secondary' %}
                        <a href="{{ item.button.value }}" class="group bg-white text-brand-primary border-2 border-brand-primary px-8 py-4 text-lg rounded-full hover:bg-brand-secondary hover:text-white hover:border-brand-secondary hover:scale-105 transition-all duration-300 text-center font-semibold">
                            <span class="relative z-10">{{ item.button.label }}</span>
                            <span class="inline-block ml-2 group-hover:translate-x-1 transition-transform">→</span>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</section>