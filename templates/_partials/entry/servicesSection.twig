{#
Services Section Component for Craft CMS 5

Uses entry fields:
- title: string (required)
- subtitle: string (optional)
- description: string (optional)
- text: Redactor field (optional)
- services: Matrix field with service entries
- backgroundColor: Color field, default: 'soft'
- svgVariant: number 1-9 or 'none', default: 1
#}

{% set background = entry.backgroundColor.value ?? entry.backgroundColor ?? 'soft' %}
{% set svgVariant = entry.svgVariant.value ?? entry.svgVariant ?? 1 %}

{# Default-Werte #}
{% set backgroundClass = '' %}
{% set textColorClass = 'text-gray-600' %}
{% set titleColorClass = 'text-brand-primary' %}
{% set subtitleBgClass = 'bg-brand-primary/10 text-brand-primary' %}
{% set svgColor1 = 'text-brand-secondary/8' %}
{% set svgColor2 = 'text-brand-accent/10' %}
{% set svgColor3 = 'text-brand-primary/12' %}
{% set svgColor4 = 'text-brand-accent/15' %}

{# Background-spezifische Ãœberschreibungen #}
{% if background == 'gradient' %}
    {% set backgroundClass = 'bg-gradient-to-br from-brand-primary to-brand-secondary' %}
    {% set textColorClass = 'text-white' %}
    {% set titleColorClass = 'text-white' %}
    {% set subtitleBgClass = 'bg-white/20 text-white' %}
    {% set svgColor1 = 'text-white/8' %}
    {% set svgColor2 = 'text-white/10' %}
    {% set svgColor3 = 'text-white/12' %}
    {% set svgColor4 = 'text-white/15' %}
{% elseif background == 'soft' %}
    {% set backgroundClass = 'bg-background-soft' %}
{% elseif background == 'white' %}
    {% set backgroundClass = 'bg-white' %}
{% elseif background == 'accent' %}
    {% set backgroundClass = 'bg-brand-accent' %}
{% elseif background in ['blue', 'orange'] %}
    {% set backgroundClass = background == 'blue' ? 'bg-brand-primary' : 'bg-brand-secondary' %}
    {% set textColorClass = 'text-white' %}
    {% set titleColorClass = 'text-white' %}
    {% set subtitleBgClass = 'bg-white/20 text-white' %}
    {% set svgColor1 = 'text-white/8' %}
    {% set svgColor2 = 'text-white/10' %}
    {% set svgColor3 = 'text-white/12' %}
    {% set svgColor4 = 'text-white/15' %}
{% endif %}

<section class="py-16 relative overflow-hidden {{ backgroundClass }}">
    {# SVG Background Shapes #}
    {% include '_partials/svg-shapes.twig' with {
        variant: svgVariant,
        color1: svgColor1,
        color2: svgColor2,
        color3: svgColor3,
        color4: svgColor4
    } %}

    <div class="max-w-7xl mx-auto px-4 lg:px-8 relative z-10">
        <div class="text-center mb-12">
            {% if entry.subtitle %}
                <div class="inline-block mb-4">
                    <span class="px-4 py-2 {{ subtitleBgClass }} rounded-full text-sm font-semibold tracking-wide">
                        {{ entry.subtitle }}
                    </span>
                </div>
            {% endif %}
            <h2 class="text-4xl font-bold {{ titleColorClass }} mb-6">
                {{ entry.heading }}
            </h2>
            {% if entry.description %}
                <div class="text-xl {{ textColorClass }} mt-4 max-w-3xl mx-auto">
                    {{ entry.description }}
                </div>
            {% endif %}
            {% if entry.text %}
                <div class="content-styles max-w-3xl mx-auto text-lg {{ textColorClass }}">
                    {{ entry.text }}
                </div>
            {% endif %}
        </div>

        <div class="grid md:grid-cols-2 gap-8">
            {% if entry.services %}
                {% for service in entry.services %}
                    <div class="p-6 hover:shadow-soft transition-all text-white flex flex-col rounded-tl-[2.5rem] rounded-br-[2.5rem]" style="background-color: {{ service.color }}">
                        <h3 class="text-2xl font-semibold mb-3">{{ service.title }}</h3>
                        <p class="mb-4 flex-grow">{{ service.text }}</p>
                        {% if service.link %}
                            <a
                                href="{{ service.link.value }}"
                                class="inline-flex items-center text-white hover:text-white/80 transition-colors font-semibold group"
                            >
                                {{ service.link.label }}
                                <svg class="w-4 h-4 ml-2 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </a>
                        {% endif %}
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
</section>